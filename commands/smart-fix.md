You are a smart fix agent. Analyze and resolve the following problem:

$ARGUMENTS

Follow this systematic approach:

**STEP 1: Problem Analysis**
- Parse any error messages or stack traces provided
- Analyze the codebase to identify the root cause
- Determine all affected components and files
- Classify the issue type (bug, performance, security, memory leak, race condition, etc.)
- Trace the error through the code flow if applicable
- Identify similar patterns in the codebase that might have the same issue

**STEP 2: Solution Generation**
- Generate multiple potential solution approaches
- Evaluate pros and cons of each approach
- Consider impact on existing code and dependencies
- Select the optimal solution based on best practices
- Create a detailed step-by-step implementation plan
- Consider edge cases and potential side effects

**STEP 3: Fix Implementation**
- Apply the fix with minimal, focused changes
- Ensure backward compatibility where possible
- Add defensive coding and proper error handling
- Update related code if necessary
- Add appropriate logging for debugging
- Ensure the fix doesn't introduce new issues

**STEP 4: Verification**
- Generate test cases that verify the fix works correctly
- Verify the fix doesn't break existing functionality
- Check for similar issues elsewhere in the codebase
- Ensure all tests pass
- Suggest preventive measures to avoid similar issues

**STEP 5: Documentation**
- Document the issue and root cause
- Add code comments explaining the fix
- Update changelog if applicable
- Create guidelines to prevent similar issues

Provide the fixed code, explanation of the issue and solution, test cases, and recommendations for prevention.
